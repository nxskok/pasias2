{
  "hash": "be4db98f397253395295c60cc4dbd3a7",
  "result": {
    "engine": "knitr",
    "markdown": "\n# Drawing graphs\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n\n\n::: {.cell}\n\n:::\n\n\n##  Orange juice\n\n\nWe will read in the orange juice data again,\nin [link](http://ritsokiguess.site/datafiles/ojuice.txt), and make a suitable graph.\n\n\n(a) The data values are separated by a space. Use the appropriate\nTidyverse function to read the data directly from the course website\ninto a \"tibble\".\n\n\n\n(b) The juice manufacturer was interested in whether there was a\nrelationship between sweetness and pectin. To assess this, draw a\nscatterplot.  Does it look as if there is any kind of a\nrelationship? (I think `sweetness` is the outcome variable\nand `pectin` is explanatory, so draw your scatterplot\nappropriately.) \n\n\n\n\n\n\n\n\n##  Making soap\n\n\nPreviously, we learned about a company that operates two production lines in a factory for\nmaking soap bars. The production lines were\nlabelled A and B. A production line that moves faster may produce more\nsoap, but may possibly also produce more \"scrap\" (that is, bits of\nsoap that \ncan no longer be made into soap bars and will have to be thrown away).  \n\nThe data are in [link](http://ritsokiguess.site/datafiles/soap.txt).\n\n\n\n(a) Read the data into R again.\n\n\n\n(b) Obtain a histogram of the `scrap` values, using 10\nbins for your histogram.\n \n\n\n(c) Comment briefly on the shape of the histogram. Is it approximately\nsymmetric, skewed to the left, skewed to the right or something else? (By \"comment  briefly\" I mean \"say in a few words why you gave the answer you did.\")\n\n\n\n(d) Make side-by-side boxplots of scrap values for each\nproduction line.\n\n\n\n(e) Do you think your boxplot says that there are differences in the\namount of scrap produced by the two production lines, or not?\nExplain briefly.\n\n\n\n(f) We started out with the suspicion that if the line was run\nfaster, there would be more scrap. We haven't assessed this\nyet. Draw a scatter plot with `scrap` on the $y$ axis and\n`speed` on the $x$ axis. \n\n\n\n(g) What do you think is the most important conclusion from\nyour plot of the previous part? Describe your conclusion in the\ncontext of the data.\n\n\n\n\n\n\n\n##  Handling shipments\n\n\nWe learned earlier about a company called Global Electronics that\nimports shipments of a certain large part used as a\ncomponent in several of its products. The size of the shipment varies\neach time. Each shipment is sent to one of two warehouses (labelled A\nand B) for handling. The data in\n[link](http://ritsokiguess.site/datafiles/global.csv) show the\n`size` of each shipment (in thousands of parts) and the direct\n`cost` of handling it, in thousands of dollars. Also shown is\nthe `warehouse` (A or B) that handled each shipment.\n\n\n\n(a) Read the data into R and display your data frame.\n\n\n\n(b) Make a scatterplot of the cost of handling each shipment as it\ndepends on the shipment's size.\n\n\n\n(c) What kind of relationship do you see on the scatterplot? Do\nyou think a straight line would describe it appropriately? Explain briefly.\n\n\n\n(d) When a shipment comes in, the cost of handling it is not\nknown. A decision is made about which warehouse to send it to, and\nthen, after it is handled, the cost is recorded. What do you think\ndetermines which warehouse an incoming shipment goes to? Provide a\ngraph to support your answer.\n\n\n\n\n\n\n\n\n## Rainfall in Davis, California\n\n One way to assess climate change is to look at weather\nrecords over a number of years and to identify any changes.\n\nAnnual rainfall data for the Davis, California is in\n[here](http://ritsokiguess.site/datafiles/rainfall.txt). \n(Right-click on the URL and select Copy Link Address, then paste into your document.)\nThe rainfall is\nmeasured in inches.\n\n\n(a) Read in and display (some of) the data. Briefly justify why you coded it as you did.\n\n\n\n(b) Make a suitable plot of the rainfall values and years. Explain briefly why you drew the plot you did.\n\n\n\n\n(c) Add a regression line to your plot. Is there any convincing\nindication of a trend, upward or downward, in annual rainfall for\nDavis, California? Discuss briefly.\n\n\n\n\n\n\n## Students and exercise\n\n Some students in a Statistics class were asked how many\nminutes they typically exercised in a week. The data are shown in\n[http://ritsokiguess.site/datafiles/exercise.txt](http://ritsokiguess.site/datafiles/exercise.txt). \n\nSome of the\nstudents identified as male and some as female. Our concern is how the males\nand females compare in terms of the amount of exercise they do.\n\n\n(a) Take a look at the data file. (Click on the link, or paste the copied link into your web browser.) How is it laid out?\n\n\n\n(b) Read in and display (some of) the data. (This means to\ndisplay enough of what you read in to convince others that you read\nin the right kind of thing.)\n\n\n\n(c) Make a suitable plot of this data frame. \n\n\n\n(d) Does there appear to be any substantial difference in the\naverage amount of time that males and females spend exercising?\nExplain briefly. (\"average\" could be mean or median. Which is it\nhere?)\n\n\n\n(e) How do you know that both distributions, for males as well\nas females, are skewed to the right? Explain (very) briefly.\n\n\n\n(f) For data like this, why does it make practical sense that\nthe distributions are skewed to the right?\n\n\n\n\n\n\n\n\n\n\nMy solutions follow:\n\n\n\n\n##  Orange juice\n\n\nWe will read in the orange juice data again,\nin [link](http://ritsokiguess.site/datafiles/ojuice.txt), and make a suitable graph.\n\n\n(a) The data values are separated by a space. Use the appropriate\nTidyverse function to read the data directly from the course website\ninto a \"tibble\".\n\n\nSolution\n\nAs before,\n\n::: {.cell}\n\n```{.r .cell-code}\nurl <- \"http://ritsokiguess.site/datafiles/ojuice.txt\"\njuice <- read_delim(url, \" \")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 24 Columns: 3\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \" \"\ndbl (3): run, sweetness, pectin\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\njuice\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"run\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"sweetness\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"pectin\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"1\",\"2\":\"5.2\",\"3\":\"220\"},{\"1\":\"2\",\"2\":\"5.5\",\"3\":\"227\"},{\"1\":\"3\",\"2\":\"6.0\",\"3\":\"259\"},{\"1\":\"4\",\"2\":\"5.9\",\"3\":\"210\"},{\"1\":\"5\",\"2\":\"5.8\",\"3\":\"224\"},{\"1\":\"6\",\"2\":\"6.0\",\"3\":\"215\"},{\"1\":\"7\",\"2\":\"5.8\",\"3\":\"231\"},{\"1\":\"8\",\"2\":\"5.6\",\"3\":\"268\"},{\"1\":\"9\",\"2\":\"5.6\",\"3\":\"239\"},{\"1\":\"10\",\"2\":\"5.9\",\"3\":\"212\"},{\"1\":\"11\",\"2\":\"5.4\",\"3\":\"410\"},{\"1\":\"12\",\"2\":\"5.6\",\"3\":\"256\"},{\"1\":\"13\",\"2\":\"5.8\",\"3\":\"306\"},{\"1\":\"14\",\"2\":\"5.5\",\"3\":\"259\"},{\"1\":\"15\",\"2\":\"5.3\",\"3\":\"284\"},{\"1\":\"16\",\"2\":\"5.3\",\"3\":\"383\"},{\"1\":\"17\",\"2\":\"5.7\",\"3\":\"271\"},{\"1\":\"18\",\"2\":\"5.5\",\"3\":\"264\"},{\"1\":\"19\",\"2\":\"5.7\",\"3\":\"227\"},{\"1\":\"20\",\"2\":\"5.3\",\"3\":\"263\"},{\"1\":\"21\",\"2\":\"5.9\",\"3\":\"232\"},{\"1\":\"22\",\"2\":\"5.8\",\"3\":\"220\"},{\"1\":\"23\",\"2\":\"5.8\",\"3\":\"246\"},{\"1\":\"24\",\"2\":\"5.9\",\"3\":\"241\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n24 runs, as we had before.\n\n$\\blacksquare$\n\n(b) The juice manufacturer was interested in whether there was a\nrelationship between sweetness and pectin. To assess this, draw a\nscatterplot.  Does it look as if there is any kind of a\nrelationship? (I think `sweetness` is the outcome variable\nand `pectin` is explanatory, so draw your scatterplot\nappropriately.) \n\n\nSolution\n\n\nThis requires a `ggplot` plot. You can go back and look\nat the lecture notes to figure out how to make a scatterplot:\nthe \"what to plot\" is the $x$-axis and $y$-axis variables,\nwith the response on the $y$-axis (starting with a data frame\nto get the variables from),  and the \"how to plot\" is\n`geom_point` to plot the points:\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(juice, aes(x = pectin, y = sweetness)) + geom_point()\n```\n\n::: {.cell-output-display}\n![](making-graphs_files/figure-html/oj2-2-1.png){width=672}\n:::\n:::\n\n         \n\nIt looks to me as if there is a negative relationship: as pectin goes\nup, sweetness tends to go *down*. The trend appears to go top\nleft to bottom right. \n\nExtra: having said that, I'm wondering how much of the\napparent trend is caused by those two observations bottom right with\npectin over 350. If you take those away, the trend seems to me to be a\nlot less convincing. You could add a smooth trend to the plot, thus:\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(juice, aes(x = pectin, y = sweetness)) + geom_point() + geom_smooth()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](making-graphs_files/figure-html/oj2-3-1.png){width=672}\n:::\n:::\n\n         \nThe smooth trend is kind of downhill, but not very convincing.\n\n$\\blacksquare$\n\n\n\n\n\n\n##  Making soap\n\n\nPreviously, we learned about a company that operates two production lines in a factory for\nmaking soap bars. The production lines were\nlabelled A and B. A production line that moves faster may produce more\nsoap, but may possibly also produce more \"scrap\" (that is, bits of\nsoap that \ncan no longer be made into soap bars and will have to be thrown away).  \n\nThe data are in [link](http://ritsokiguess.site/datafiles/soap.txt).\n\n\n\n(a) Read the data into R again.\n\n\nSolution\n\n\nRead directly from the URL, most easily:\n\n::: {.cell}\n\n```{.r .cell-code}\nurl <- \"http://ritsokiguess.site/datafiles/soap.txt\"\nsoap <- read_delim(url, \" \")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 27 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \" \"\nchr (1): line\ndbl (3): case, scrap, speed\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\nsoap\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"case\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"scrap\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"speed\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"line\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"1\",\"2\":\"218\",\"3\":\"100\",\"4\":\"a\"},{\"1\":\"2\",\"2\":\"248\",\"3\":\"125\",\"4\":\"a\"},{\"1\":\"3\",\"2\":\"360\",\"3\":\"220\",\"4\":\"a\"},{\"1\":\"4\",\"2\":\"351\",\"3\":\"205\",\"4\":\"a\"},{\"1\":\"5\",\"2\":\"470\",\"3\":\"300\",\"4\":\"a\"},{\"1\":\"6\",\"2\":\"394\",\"3\":\"255\",\"4\":\"a\"},{\"1\":\"7\",\"2\":\"332\",\"3\":\"225\",\"4\":\"a\"},{\"1\":\"8\",\"2\":\"321\",\"3\":\"175\",\"4\":\"a\"},{\"1\":\"9\",\"2\":\"410\",\"3\":\"270\",\"4\":\"a\"},{\"1\":\"10\",\"2\":\"260\",\"3\":\"170\",\"4\":\"a\"},{\"1\":\"11\",\"2\":\"241\",\"3\":\"155\",\"4\":\"a\"},{\"1\":\"12\",\"2\":\"331\",\"3\":\"190\",\"4\":\"a\"},{\"1\":\"13\",\"2\":\"275\",\"3\":\"140\",\"4\":\"a\"},{\"1\":\"14\",\"2\":\"425\",\"3\":\"290\",\"4\":\"a\"},{\"1\":\"15\",\"2\":\"367\",\"3\":\"265\",\"4\":\"a\"},{\"1\":\"16\",\"2\":\"140\",\"3\":\"105\",\"4\":\"b\"},{\"1\":\"17\",\"2\":\"277\",\"3\":\"215\",\"4\":\"b\"},{\"1\":\"18\",\"2\":\"384\",\"3\":\"270\",\"4\":\"b\"},{\"1\":\"19\",\"2\":\"341\",\"3\":\"255\",\"4\":\"b\"},{\"1\":\"20\",\"2\":\"215\",\"3\":\"175\",\"4\":\"b\"},{\"1\":\"21\",\"2\":\"180\",\"3\":\"135\",\"4\":\"b\"},{\"1\":\"22\",\"2\":\"260\",\"3\":\"200\",\"4\":\"b\"},{\"1\":\"23\",\"2\":\"361\",\"3\":\"275\",\"4\":\"b\"},{\"1\":\"24\",\"2\":\"252\",\"3\":\"155\",\"4\":\"b\"},{\"1\":\"25\",\"2\":\"422\",\"3\":\"320\",\"4\":\"b\"},{\"1\":\"26\",\"2\":\"273\",\"3\":\"190\",\"4\":\"b\"},{\"1\":\"27\",\"2\":\"410\",\"3\":\"295\",\"4\":\"b\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n    \n\n27 rows. `line`, which is either `a` or `b`, was\ncorrectly deduced to be text.\n\n$\\blacksquare$\n\n(b) Obtain a histogram of the `scrap` values, using 10\nbins for your histogram.\n \n\nSolution\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(soap, aes(x = scrap)) + geom_histogram(bins = 10)\n```\n\n::: {.cell-output-display}\n![](making-graphs_files/figure-html/soap2-2-1.png){width=672}\n:::\n:::\n\n \n\n$\\blacksquare$\n\n(c) Comment briefly on the shape of the histogram. Is it approximately\nsymmetric, skewed to the left, skewed to the right or something else? (By \"comment  briefly\" I mean \"say in a few words why you gave the answer you did.\")\n\n\nSolution\n\n\nI would call this \"bimodal\". There are two peaks to the\nhistogram, one around 250 and one around 370, with a very small\nfrequency in between (the bar around 300). \nApart from the bimodality, there is no particular evidence for a\nlong tail on either end, so I don't think you could otherwise\ncall it anything other than symmetric.\nHaving said that (this is going beyond the question), the way a\nhistogram looks can depend on the bins you choose to draw it\nwith. This is 8 bins rather than 10:\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(soap, aes(x = scrap)) + geom_histogram(bins = 8)\n```\n\n::: {.cell-output-display}\n![](making-graphs_files/figure-html/soap2-3-1.png){width=672}\n:::\n:::\n\n \n\nThe middle low-frequency bin has gone, and this one just looks\nsymmetric, with a kind of \"flat top\".\n\n$\\blacksquare$\n\n(d) Make side-by-side boxplots of scrap values for each\nproduction line.\n\n\nSolution\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(soap, aes(x = line, y = scrap)) + geom_boxplot()\n```\n\n::: {.cell-output-display}\n![](making-graphs_files/figure-html/soap2-4-1.png){width=672}\n:::\n:::\n\n\n\nOne categorical, one quantitative variable, so boxplots make sense.\n\n$\\blacksquare$\n\n(e) Do you think your boxplot says that there are differences in the\namount of scrap produced by the two production lines, or not?\nExplain briefly.\n\n\nSolution\n\n\nI would say that there *is* a difference between the two\nproduction lines, with line A producing an average (median) of\nabout 330 and line B producing a median of about 275. But you\ncould also make the case that, although the medians are rather\ndifferent, there is a lot of variability and hence a lot of\noverlap between the two boxplots, and therefore that there is\nnot a \"substantial\" difference.\nI would say that either of those answers are good *if you\nback them up with proper reasons*. This is going to be a\ncommon theme in this course: I am going to ask you to make a\ndecision and support it, where the reasons you provide are often\nmore\nimportant than the decision you make.\n\nExtra: you might be wondering whether the medians, or means, since\nthere is no serious skewness here and definitely no outliers,\nare \"significantly different\". This is inference, which we\nwill come to later, but a preview looks like this:\n\n::: {.cell}\n\n```{.r .cell-code}\nt.test(scrap ~ line, data = soap)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tWelch Two Sample t-test\n\ndata:  scrap by line\nt = 1.2493, df = 21.087, p-value = 0.2253\nalternative hypothesis: true difference in means between group a and group b is not equal to 0\n95 percent confidence interval:\n -26.97888 108.21222\nsample estimates:\nmean in group a mean in group b \n       333.5333        292.9167 \n```\n\n\n:::\n:::\n\n       \n\nThey are not: the P-value of 0.22 is not anywhere near as small as\n0.05, so we can't reject the null hypothesis that the two lines have\nequal mean amount of scrap. \n\nRusty on this stuff? Don't worry; we're going to come back to it later\nin the course.\n\nI was also wondering about something else: that bimodal\nhistogram. Could that be explained by the scrap values being two\ndifferent production lines being mixed together? One way to understand\nthat is to have two separate histograms, one for each line, side by\nside, which is what facetting does. There is an extra wrinkle here\nthat I explain afterwards:\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(soap, aes(x = scrap)) + geom_histogram(bins = 10) + facet_grid(line ~ .)\n```\n\n::: {.cell-output-display}\n![](making-graphs_files/figure-html/soap2-6-1.png){width=672}\n:::\n:::\n\n \n\nI could have used `facet_wrap`, but that would have put the\nhistograms side by side, and I wanted them one above the other (for\nease of comparison, since they'll be on the same\nscale). `facet_grid` is like `facet_wrap`, but offers\nyou more control over where the facets go: you can arrange them above\nand below by a variable, or left and right by a variable. Whatever is\nfacetting the plots up and down (on the $y$ axis) goes before the\nsquiggle, and whatever facets them left and right goes after. If there\nis nothing separating the facets in one direction, here horizontally,\nthe variable is replaced by a dot.\n\nIn some ways, `facet_grid` is also *less* flexible,\nbecause the facets have to be arranged up/down or left/right by a\nvariable. That worked here, but if you think back to the Australian\nathletes, where there were ten different sports, it was\n`facet_wrap` that did the right thing, arranging the sports\nalong rows *and* columns to produce a pleasing display.\n\nAll right, that bimodality. I was expecting that the scrap values from\none line would be centred about one value and the scrap values from\nthe other line would be centred about a different value, with a gap in\nbetween. But that's not what happened at all: the line B values are\nall over the place, while it's the line A values that are actually\nbimodal all by themselves. I'm not sure whether that really means\nanything, since the data sets are pretty small, but it's kind of\ninteresting. \n\n$\\blacksquare$\n\n(f) We started out with the suspicion that if the line was run\nfaster, there would be more scrap. We haven't assessed this\nyet. Draw a scatter plot with `scrap` on the $y$ axis and\n`speed` on the $x$ axis. \n\n\nSolution\n\n\nSame mechanism as before:\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(soap, aes(x = speed, y = scrap)) + geom_point()\n```\n\n::: {.cell-output-display}\n![](making-graphs_files/figure-html/soap2-7-1.png){width=672}\n:::\n:::\n\n \n\n$\\blacksquare$\n\n(g) What do you think is the most important conclusion from\nyour plot of the previous part? Describe your conclusion in the\ncontext of the data.\n\n\nSolution\n\n\nThere seems to be a pretty evident upward trend, apparently\nlinear, which means that if the speed of the production line is\nhigher, the amount of scrap produced is also higher.\nMy last sentence was meant to remind you that \n\"there is an upward trend\" is *not a complete answer*: \nwe are concerned\nwith what that upward trend tells us about the data. \nThis, in other words, confirms the suspicion expressed in the\nquestion, which was therefore a rather large clue: more speed\ntends to go with more scrap.\nThat was as far as I wanted you to go: there seems to be an\nassociation with speed, and there might be an association with\n`line` that turned out not to be statistically significant.\nWhat we haven't done is to assess the relationship between speed\nand scrap for *each* production line. To do that, we want\nto plot the scrap-speed points distinguished for each production\nline. `ggplot` makes that easy: you add a\n`colour`^[If you are concerned about the spelling: the guy who wrote ggplot is from New Zealand, where they spell *colour* the same way we do. However, if you want to use *color*, that works too.] to say what you want to\ndistinguish by colour. This is two quantitative variables and one\ncategorical variable, if you want to think of it that way:\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(soap, aes(x = speed, y = scrap, colour = line)) + geom_point()\n```\n\n::: {.cell-output-display}\n![](making-graphs_files/figure-html/soap2-8-1.png){width=672}\n:::\n:::\n\n       \n\nNotice that we get a legend, automatically.\n\nWhat is interesting about this one is the red dots are mostly at the\ntop (for any given speed), and the blue dots are mostly at the\nbottom. That seems to mean that *when we account for speed*,\nthere is a difference between lines.\n\nI want to show you one more embellishment, which is to put the\nregression lines on the plot for each group separately. This is where\n`ggplot` is so nice, since I just have to add one thing:\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(soap, aes(x = speed, y = scrap, colour = line)) +\n  geom_point() + geom_smooth(method = \"lm\", se = F)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](making-graphs_files/figure-html/soap2-9-1.png){width=672}\n:::\n:::\n\n       \n\nThe points and lines have come out in different colours, without our\nhaving to think too hard.\n\nBoth lines show an upward trend, with about the same slope, which\nmeans that regardless of line, increasing the speed goes with\nincreasing the scrap by the same amount. The fact that the red line is\nabove the blue one, however, suggests that production line A produces\nmore scrap at the same speed than production line B.\n\nFrom a management point of view, there is an interesting dynamic at\nwork: if you run the production line faster, you'll produce more bars\nof soap, but you'll produce more scrap as well. The crucial thing for\nthe people in the supervisor's office is how much raw material is used\nper bar of soap, and if you make the soap bars faster, you might use\nmore raw material, which will eat into your profits (from one angle),\nbut you will also have more bars of soap to sell.\n\nHere's another way to see the same thing. I'm *definitely* not\nexpecting you to follow the code, but you can admire the result!\n\n::: {.cell}\n\n```{.r .cell-code}\nsoap2 <- soap %>% select(-line)\nggplot(soap, aes(x = speed, y = scrap)) +\n  geom_point(data = soap2, colour = \"grey\") +\n  geom_point(aes(colour = line)) + facet_wrap(~line)\n```\n\n::: {.cell-output-display}\n![](making-graphs_files/figure-html/soap2-10-1.png){width=672}\n:::\n:::\n$\n\nThe idea is that we plot all the points in grey (to \n\"put them in the background\") \n and then in each plot we plot the points again,\n*coloured, for the group we are looking at*: line A in the left,\nline B on the right. This is another way of seeing that line A has\nmore scrap than line B, given the speed at which the line was being\nrun. (I discovered this technique only yesterday. I think the code is\nremarkably concise for what it does.)\n\nThe logic of the code is:\n\n\n* create a new data frame that contains everything in\n`soap` except for `line`\n\n* make a scatter plot of all the points in this new data frame,\ncoloured grey\n\n* plot the points again (from the original data frame), coloured by\nwhich production line they're from\n\n* produce a separate scatterplot for each production line.\n\n\nThe trick about creating the new data frame was to enable plotting of\nall points regardless of group on each subplot (\"facet\" in\n`ggplot` terminology), as well as the ones that come from that\nproduction line.\n\nI don't expect you to be able to follow all the details of the code\nbelow, either,\nbut I would like you to try and get the logic. What we do is a\nregression predicting `scrap` from *two* things:\n`speed` and production `line`. The results we get are these:\n\n::: {.cell}\n\n```{.r .cell-code}\nscrap.1 <- lm(scrap ~ speed + line, data = soap)\nsummary(scrap.1)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nlm(formula = scrap ~ speed + line, data = soap)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-39.557 -14.161  -0.121  17.518  33.953 \n\nCoefficients:\n             Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  80.41099   14.54379   5.529 1.10e-05 ***\nspeed         1.23074    0.06555  18.775 7.48e-16 ***\nlineb       -53.12920    8.21003  -6.471 1.08e-06 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 21.13 on 24 degrees of freedom\nMultiple R-squared:  0.9402,\tAdjusted R-squared:  0.9352 \nF-statistic: 188.6 on 2 and 24 DF,  p-value: 2.104e-15\n```\n\n\n:::\n:::\n\n \n\nThe P-values for `speed` and `line` are the second and\nthird things in the last column, $7 \\times 10^{-16}$  and $1 \\times 10^{-6}$\nrespectively. These are both very strongly significant, in contrast to\nthe two-sample $t$-test where `line` was not significant.\n\nSo does production line make a difference or not?\n\nThe plot says that it does, and the meaning of model `scrap.1`\njust above is that\n*`speed` affects scrap when you account for `line`*, and \n*`line` affects scrap when you account for `speed`*. \n(In the two-sample $t$-test above we didn't\naccount for speed at all, since the various speeds were all mixed up.)\n\nThere is a moral to this story, which I would like you to get even if\nyou don't get any of the statistics: if a variable makes a\ndifference, it should be in your model and on your\ngraph,^[Meaning that the model should contain all three variables, `speed`, `scrap` and `line`.]\nbecause it enables you to get better (more precise) conclusions about your\nother variables. Here, there really is a difference between the\nproduction lines, but the $t$-test was too much of a blunt instrument\nto unearth it (because `speed` made a difference as well).\n\n$\\blacksquare$\n\n\n\n\n\n##  Handling shipments\n\n\nWe learned earlier about a company called Global Electronics that\nimports shipments of a certain large part used as a\ncomponent in several of its products. The size of the shipment varies\neach time. Each shipment is sent to one of two warehouses (labelled A\nand B) for handling. The data in\n[link](http://ritsokiguess.site/datafiles/global.csv) show the\n`size` of each shipment (in thousands of parts) and the direct\n`cost` of handling it, in thousands of dollars. Also shown is\nthe `warehouse` (A or B) that handled each shipment.\n\n\n\n(a) Read the data into R and display your data frame.\n\n\nSolution\n\nA `.csv`:\n\n::: {.cell}\n\n```{.r .cell-code}\nurl <- \"http://ritsokiguess.site/datafiles/global.csv\"\nshipments <- read_csv(url)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 10 Columns: 3\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (1): warehouse\ndbl (2): size, cost\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\nshipments\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"warehouse\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"size\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"cost\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"A\",\"2\":\"225\",\"3\":\"11.95\"},{\"1\":\"B\",\"2\":\"350\",\"3\":\"14.13\"},{\"1\":\"A\",\"2\":\"150\",\"3\":\"8.93\"},{\"1\":\"A\",\"2\":\"200\",\"3\":\"10.98\"},{\"1\":\"A\",\"2\":\"175\",\"3\":\"10.03\"},{\"1\":\"A\",\"2\":\"180\",\"3\":\"10.13\"},{\"1\":\"B\",\"2\":\"325\",\"3\":\"13.75\"},{\"1\":\"B\",\"2\":\"290\",\"3\":\"13.30\"},{\"1\":\"B\",\"2\":\"400\",\"3\":\"15.00\"},{\"1\":\"A\",\"2\":\"125\",\"3\":\"7.97\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n     \n\n$\\blacksquare$\n\n(b) Make a scatterplot of the cost of handling each shipment as it\ndepends on the shipment's size.\n\n\nSolution\n\n\nThe wording of the question says that cost is the response and so\nbelongs on the $y$-axis. To make the plot, `ggplot` with an\n`x=` and a `y=` in the `aes` (the \"what to  plot\" \npart), and a `geom_point()` after (the \"how to plot it\"):\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(shipments, aes(x = size, y = cost)) + geom_point()\n```\n\n::: {.cell-output-display}\n![](making-graphs_files/figure-html/gunthers-1.png){width=672}\n:::\n:::\n\n     \n\nAs a matter of coding, there are usually *two* brackets to close\nafter the `aes`, the one that begins the `ggplot` and\nthe one that begins the `aes`. \n    \n\n$\\blacksquare$\n\n(c) What kind of relationship do you see on the scatterplot? Do\nyou think a straight line would describe it appropriately? Explain briefly.\n\n\nSolution\n\n\nI see an upward trend: a shipment with larger `size` costs\nmore to handle. \nIf you look carefully at the scatterplot, you see that the cost of\nhandling a small shipment goes up fairly steeply with its size,\nbut the cost of handling a large shipment, while it still\nincreases with `size`, does not increase so fast. Thus\nhaving one straight line to describe the whole relationship would\nnot work so well. \nThe relationship is actually two different\nstraight lines joined end-to-end, which we will explore later, but\nif you think the relationship is curved, I'll accept that. The\npoint is to get at the idea that the rate of increase is not\nconstant.\n    \n\n$\\blacksquare$\n\n(d) When a shipment comes in, the cost of handling it is not\nknown. A decision is made about which warehouse to send it to, and\nthen, after it is handled, the cost is recorded. What do you think\ndetermines which warehouse an incoming shipment goes to? Provide a\ngraph to support your answer.\n\n\nSolution\n\n\nThe veiled hint in the question is that the decision must depend\non `size`, since it cannot depend on `cost`. So we\nhave one quantitative variable `size` and one categorical\nvariable `warehouse`, which suggests drawing boxplots:\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(shipments, aes(x = warehouse, y = size)) + geom_boxplot()\n```\n\n::: {.cell-output-display}\n![](making-graphs_files/figure-html/tochterman-1.png){width=672}\n:::\n:::\n\n     \n\nWell, there's the answer right there. When the shipment has small\n`size`, it goes to warehouse A, and when it's large, it goes to\nWarehouse B. We know this because *all* the shipments smaller\nthan about 250 (thousand parts) went to A and *all* the shipments\nlarger than that went to B. (If you want to provide a number to\ndelineate \"small\" and \"large\", anything between the largest A,\nabout 225, and the smallest B, about 290, will do.)\n\nAnother way to think about this is to add something to the scatterplot\nyou drew before. The obvious thing is to make the two warehouses\ndifferent colours:\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(shipments, aes(x = size, y = cost, colour = warehouse)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](making-graphs_files/figure-html/friesin-1.png){width=672}\n:::\n:::\n\n     \n\nAs a point of technique, you can split lines of code to make them fit\non your screen. You can do this as long as \n*the code that ends the line must be incomplete*, so that R knows more is to\ncome. Ending a line with a pipe symbol, or, as here, with one of the\npluses in the middle of a `ggplot`, will work. If you put the\nplus on the start of the next line, you'll get a blank plot, because R\nthinks you're done plotting. Try it and see.\n\nAnyway, this plot tells exactly the same story: the small shipments\n(in size or cost) go to Warehouse A and the large ones to Warehouse\nB. But we don't know cost when the decision is made about which\nwarehouse to send a shipment to, so the decision must be based on\n`size`. \n\nIn the place where I got these data, it said \"larger shipments are sent to Warehouse B, since this warehouse has specialized equipment that provides greater economies of scale for larger shipments\". \nThat\nis to say, very large shipments are more expensive to handle, but not\nas expensive as you might think.^[This is the same idea that it  costs more to ride the GO bus from UTSC to York U than it does to  ride from UTSC to Scarborough Town, but if you work out how much it  costs per kilometre, the longer journey costs less per km. As of  when I'm writing this, $5.30 for the 7.2 km to Scarborough Town and  $6.75 for the 38 km to York. That's quite an economy of scale,  isn't it?] \nThat makes sense with our scatterplot, because the\n*slope* for larger shipments is less than for smaller shipments.\n\nWhen we get to regression later, we'll see what happens if we fit a\nstraight line to data like these, and how to tell whether we really\nought to be able to do better with a different form of\nrelationship. There is also a trick to fit what is called a\n\"piecewise linear regression\", which has one slope for small\nshipment sizes, a different (smaller) slope for large ones, and joins\nup in the middle. But that's well beyond our scope now.\n    \n$\\blacksquare$\n\n\n\n\n\n\n## Rainfall in Davis, California\n\n One way to assess climate change is to look at weather\nrecords over a number of years and to identify any changes.\n\nAnnual rainfall data for the Davis, California is in\n[here](http://ritsokiguess.site/datafiles/rainfall.txt). \n(Right-click on the URL and select Copy Link Address, then paste into your document.)\nThe rainfall is\nmeasured in inches.\n\n\n(a) Read in and display (some of) the data. Briefly justify why you coded it as you did.\n\nSolution\n\n\nLook at the data file, and see that the values are separated by a\nsingle space, so \\verb=read_delim= will do it. (This is the brief justification.) You *need to have some words* in this part explaining your choice of `read_delim` (or `read_table`: see below).\n\nRead straight from\nthe URL rather than copying and pasting the data or doing anything  like that:^[Reading from the URL is reproducible in that somebody else doing what you did will get exactly what results you did. Copying and pasting data is not in general reproducible because somebody else might do it differently from you, such as missing a line of data. Copying and pasting a URL, especially by right-clicking and Copy Link Address, has much less to go wrong. Physically selecting the URL text by selecting all the letters in the URL can go wrong, especially if the printed URL goes over two lines on the page.]\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_url <- \"http://ritsokiguess.site/datafiles/rainfall.txt\"\nrain <- read_delim(my_url, \" \")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 47 Columns: 2\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \" \"\ndbl (2): Year, Rainfall\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\nrain\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Year\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Rainfall\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"1951\",\"2\":\"20.66\"},{\"1\":\"1952\",\"2\":\"16.72\"},{\"1\":\"1953\",\"2\":\"13.51\"},{\"1\":\"1954\",\"2\":\"14.10\"},{\"1\":\"1955\",\"2\":\"25.37\"},{\"1\":\"1956\",\"2\":\"12.05\"},{\"1\":\"1957\",\"2\":\"28.74\"},{\"1\":\"1958\",\"2\":\"10.98\"},{\"1\":\"1959\",\"2\":\"12.55\"},{\"1\":\"1960\",\"2\":\"12.75\"},{\"1\":\"1961\",\"2\":\"14.99\"},{\"1\":\"1962\",\"2\":\"27.10\"},{\"1\":\"1963\",\"2\":\"11.20\"},{\"1\":\"1964\",\"2\":\"18.56\"},{\"1\":\"1965\",\"2\":\"11.49\"},{\"1\":\"1966\",\"2\":\"27.64\"},{\"1\":\"1967\",\"2\":\"11.49\"},{\"1\":\"1968\",\"2\":\"24.67\"},{\"1\":\"1969\",\"2\":\"17.04\"},{\"1\":\"1970\",\"2\":\"16.34\"},{\"1\":\"1971\",\"2\":\"8.60\"},{\"1\":\"1972\",\"2\":\"27.69\"},{\"1\":\"1973\",\"2\":\"20.87\"},{\"1\":\"1974\",\"2\":\"16.88\"},{\"1\":\"1975\",\"2\":\"6.14\"},{\"1\":\"1976\",\"2\":\"7.69\"},{\"1\":\"1977\",\"2\":\"27.69\"},{\"1\":\"1978\",\"2\":\"17.25\"},{\"1\":\"1979\",\"2\":\"25.06\"},{\"1\":\"1980\",\"2\":\"12.03\"},{\"1\":\"1981\",\"2\":\"31.29\"},{\"1\":\"1982\",\"2\":\"37.42\"},{\"1\":\"1983\",\"2\":\"16.67\"},{\"1\":\"1984\",\"2\":\"15.74\"},{\"1\":\"1985\",\"2\":\"27.47\"},{\"1\":\"1986\",\"2\":\"10.81\"},{\"1\":\"1987\",\"2\":\"16.30\"},{\"1\":\"1988\",\"2\":\"11.38\"},{\"1\":\"1989\",\"2\":\"15.79\"},{\"1\":\"1990\",\"2\":\"13.84\"},{\"1\":\"1991\",\"2\":\"17.46\"},{\"1\":\"1992\",\"2\":\"29.84\"},{\"1\":\"1993\",\"2\":\"11.86\"},{\"1\":\"1994\",\"2\":\"31.22\"},{\"1\":\"1995\",\"2\":\"24.50\"},{\"1\":\"1996\",\"2\":\"19.52\"},{\"1\":\"1997\",\"2\":\"29.69\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\nNote for later that the \\verb=Year= and the \\verb=Rainfall= have\nCapital Letters. You can call the data frame whatever you like, but I\nthink something descriptive is better than eg.\\ \\verb=mydata=.\n\n\nExtra 1: `read_delim` works because there is exactly one space between the year and the\nrainfall amount. But the year is always four digits, so the columns\nline up, and there is a space all the way down between the year and\nthe rainfall. That is to say, another possibility for your \"brief justification\" is that the columns are lined up all the way down.\nThat means that this will also work: \n\n::: {.cell}\n\n```{.r .cell-code}\nmy_url <- \"http://ritsokiguess.site/datafiles/rainfall.txt\"\nrain <- read_table(my_url)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\n── Column specification ────────────────────────────────────────────────────────\ncols(\n  Year = col_double(),\n  Rainfall = col_double()\n)\n```\n\n\n:::\n\n```{.r .cell-code}\nrain\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Year\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Rainfall\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"1951\",\"2\":\"20.66\"},{\"1\":\"1952\",\"2\":\"16.72\"},{\"1\":\"1953\",\"2\":\"13.51\"},{\"1\":\"1954\",\"2\":\"14.10\"},{\"1\":\"1955\",\"2\":\"25.37\"},{\"1\":\"1956\",\"2\":\"12.05\"},{\"1\":\"1957\",\"2\":\"28.74\"},{\"1\":\"1958\",\"2\":\"10.98\"},{\"1\":\"1959\",\"2\":\"12.55\"},{\"1\":\"1960\",\"2\":\"12.75\"},{\"1\":\"1961\",\"2\":\"14.99\"},{\"1\":\"1962\",\"2\":\"27.10\"},{\"1\":\"1963\",\"2\":\"11.20\"},{\"1\":\"1964\",\"2\":\"18.56\"},{\"1\":\"1965\",\"2\":\"11.49\"},{\"1\":\"1966\",\"2\":\"27.64\"},{\"1\":\"1967\",\"2\":\"11.49\"},{\"1\":\"1968\",\"2\":\"24.67\"},{\"1\":\"1969\",\"2\":\"17.04\"},{\"1\":\"1970\",\"2\":\"16.34\"},{\"1\":\"1971\",\"2\":\"8.60\"},{\"1\":\"1972\",\"2\":\"27.69\"},{\"1\":\"1973\",\"2\":\"20.87\"},{\"1\":\"1974\",\"2\":\"16.88\"},{\"1\":\"1975\",\"2\":\"6.14\"},{\"1\":\"1976\",\"2\":\"7.69\"},{\"1\":\"1977\",\"2\":\"27.69\"},{\"1\":\"1978\",\"2\":\"17.25\"},{\"1\":\"1979\",\"2\":\"25.06\"},{\"1\":\"1980\",\"2\":\"12.03\"},{\"1\":\"1981\",\"2\":\"31.29\"},{\"1\":\"1982\",\"2\":\"37.42\"},{\"1\":\"1983\",\"2\":\"16.67\"},{\"1\":\"1984\",\"2\":\"15.74\"},{\"1\":\"1985\",\"2\":\"27.47\"},{\"1\":\"1986\",\"2\":\"10.81\"},{\"1\":\"1987\",\"2\":\"16.30\"},{\"1\":\"1988\",\"2\":\"11.38\"},{\"1\":\"1989\",\"2\":\"15.79\"},{\"1\":\"1990\",\"2\":\"13.84\"},{\"1\":\"1991\",\"2\":\"17.46\"},{\"1\":\"1992\",\"2\":\"29.84\"},{\"1\":\"1993\",\"2\":\"11.86\"},{\"1\":\"1994\",\"2\":\"31.22\"},{\"1\":\"1995\",\"2\":\"24.50\"},{\"1\":\"1996\",\"2\":\"19.52\"},{\"1\":\"1997\",\"2\":\"29.69\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\nThis is therefore also good.\n\nIt also looks as if it could be tab-separated values, since the rainfall\ncolumn always starts in the same place, but if you try it, you'll find\nthat it doesn't work:\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_url <- \"http://ritsokiguess.site/datafiles/rainfall.txt\"\nrain_nogood <- read_tsv(my_url)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 47 Columns: 1\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \"\\t\"\nchr (1): Year Rainfall\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\nrain_nogood\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Year Rainfall\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"1951 20.66\"},{\"1\":\"1952 16.72\"},{\"1\":\"1953 13.51\"},{\"1\":\"1954 14.1\"},{\"1\":\"1955 25.37\"},{\"1\":\"1956 12.05\"},{\"1\":\"1957 28.74\"},{\"1\":\"1958 10.98\"},{\"1\":\"1959 12.55\"},{\"1\":\"1960 12.75\"},{\"1\":\"1961 14.99\"},{\"1\":\"1962 27.1\"},{\"1\":\"1963 11.2\"},{\"1\":\"1964 18.56\"},{\"1\":\"1965 11.49\"},{\"1\":\"1966 27.64\"},{\"1\":\"1967 11.49\"},{\"1\":\"1968 24.67\"},{\"1\":\"1969 17.04\"},{\"1\":\"1970 16.34\"},{\"1\":\"1971 8.6\"},{\"1\":\"1972 27.69\"},{\"1\":\"1973 20.87\"},{\"1\":\"1974 16.88\"},{\"1\":\"1975 6.14\"},{\"1\":\"1976 7.69\"},{\"1\":\"1977 27.69\"},{\"1\":\"1978 17.25\"},{\"1\":\"1979 25.06\"},{\"1\":\"1980 12.03\"},{\"1\":\"1981 31.29\"},{\"1\":\"1982 37.42\"},{\"1\":\"1983 16.67\"},{\"1\":\"1984 15.74\"},{\"1\":\"1985 27.47\"},{\"1\":\"1986 10.81\"},{\"1\":\"1987 16.3\"},{\"1\":\"1988 11.38\"},{\"1\":\"1989 15.79\"},{\"1\":\"1990 13.84\"},{\"1\":\"1991 17.46\"},{\"1\":\"1992 29.84\"},{\"1\":\"1993 11.86\"},{\"1\":\"1994 31.22\"},{\"1\":\"1995 24.5\"},{\"1\":\"1996 19.52\"},{\"1\":\"1997 29.69\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\nThis looks as if it worked, but it didn't, because there is only\n*one* column, of years and rainfalls smooshed together as text,\nand if you try to do anything else with them later it won't work.^[It is actually possible to disentangle data like this and then work with it (we will see how later in the course), but the best way to do it is to make it easiest for yourself and anyone reading your code, and read the data file in a way that is appropriate for the layout you have in the file.]\n\nHence those values that might have been tabs actually were\nnot. There's no way to be sure about this; you have to try something\nand see what works.^[An indication, though: if you have more than one\nspace, and the things in the later columns are *left*-justified,\nthat could be tab-separated; if the things in the later columns are\n*right*-justified, so that they finish in the same place but\ndon't start in the same place, that is probably aligned columns.]\n\nExtra 2: `read.table` with a dot will work, but it is in this course *wrong*. As I stated in the course outline, I expect you to do things *as they are done in this course*. Strictly speaking, if you use `read.table`, which you did not learn from me, and you say nothing about where you got it from, you are guilty of plagiarism, which is an academic offence. I will probably not be that strict, but you should certainly expect to lose credit for doing things differently from how they are done in this course. The idea is that you need to demonstrate that you have learned something *here*.\n\n\n\n$\\blacksquare$\n\n\n(b) Make a suitable plot of the rainfall values and years. Explain briefly why you drew the plot you did.\n\n\nSolution\n\nThis is two quantitative variables, so a scatterplot makes\nsense. (That's the brief explanation.) To decide which variable goes on which axis, think of\nrainfall as a response to the explanatory variable year, or note\nthat time goes by tradition on the horizontal axis:\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(rain, aes(x=Year, y=Rainfall)) + geom_point()\n```\n\n::: {.cell-output-display}\n![](making-graphs_files/figure-html/rainfall2-4-1.png){width=672}\n:::\n:::\n\nThis is a time trend, so it would also be reasonable to join the points with lines:\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(rain, aes(x=Year, y=Rainfall)) + geom_point() + geom_line()\n```\n\n::: {.cell-output-display}\n![](making-graphs_files/figure-html/rainfall2-5-1.png){width=672}\n:::\n:::\n\nand because any trend looks irregular, you could also justify putting a smooth trend through the points:\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(rain, aes(x=Year, y=Rainfall)) + geom_point() + geom_smooth()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](making-graphs_files/figure-html/rainfall2-6-1.png){width=672}\n:::\n:::\n\nThis one is rather interesting (as an aside): there is a more noticeable upward trend at the end, after about 1985. If you study environmental science, you may have seen that a lot of time plots of climate data show a bigger change after about 1990, and this is one of those.\n\n\nIf you treat the year as categorical, and try to draw a boxplot, it won't work out so well:\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(rain, aes(x=Year, y=Rainfall)) + geom_boxplot()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Continuous x aesthetic\nℹ did you forget `aes(group = ...)`?\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](making-graphs_files/figure-html/rainfall2-7-1.png){width=672}\n:::\n:::\n\nThis is actually a boxplot of rainfall in all the years together; it ignored year because it couldn't figure out what you wanted to do with it. The warning message is indicating that you might have forgotten something that defines groups; the `x` is quantitative here. So you have to clarify what you meant. For example, you might have meant to treat the years as categorical, which you could do like this:\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(rain, aes(x=factor(Year), y=Rainfall)) + geom_boxplot()\n```\n\n::: {.cell-output-display}\n![](making-graphs_files/figure-html/rainfall2-8-1.png){width=672}\n:::\n:::\n\nAside from the fact that you have too many years to see them all, you only have *one* observation per year (that year's annual rainfall), so you don't get an actual box. To get boxes, you need to organize groups where you have multiple observations, for example decades:\n\n::: {.cell}\n\n```{.r .cell-code}\nrain %>% \n  mutate(decade_number = Year %/% 10) %>% \n  mutate(decade = str_c(decade_number, \"0s\")) %>% \n  ggplot(aes(x = decade, y = Rainfall)) + geom_boxplot()\n```\n\n::: {.cell-output-display}\n![](making-graphs_files/figure-html/rainfall2-9-1.png){width=672}\n:::\n:::\n\nYou see that there seems to have been an upward jump in rainfall in the 1990s (the last decade in the data).\n\nAbout the code: `%/%' does \"integer division\" (throws away the fractional part if there is one), so the calculation turns eg. 1954 into 195. I wanted to have the graph display something you could understand, so I constructed some text out of the decade number by gluing a 0 and a letter s onto the end.\n\nAnother kind of situation where this approach does work is if you have something like monthly rainfall over a number of years, and then you have multiple values for January over all the years that you have data for.\n\n\n$\\blacksquare$\n\n\n(c) Add a regression line to your plot. Is there any convincing\nindication of a trend, upward or downward, in annual rainfall for\nDavis, California? Discuss briefly.\n\nSolution\n\nThus:\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(rain, aes(x=Year, y=Rainfall)) + geom_point() + \ngeom_smooth(method=\"lm\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](making-graphs_files/figure-html/rainfall2-10-1.png){width=672}\n:::\n:::\n\n\nThe regression line goes uphill, but this is not convincing evidence\nof an overall upward trend for several reasons (pick one): \n\n- the increase, if there is one, is very small\n- the data points are mostly far away from the regression line\n- there are points within the grey envelope all the way across\n(meaning, for example, that the mean annual rainfall could be 20\ninches for all the years).\n\nFurther evidence comes from a regression (which we haven't looked at\n yet):\n\n::: {.cell}\n\n```{.r .cell-code}\nr.1 <- lm(Rainfall~Year, data=rain)\nsummary(r.1)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nlm(formula = Rainfall ~ Year, data = rain)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-12.670  -5.252  -1.905   7.088  17.804 \n\nCoefficients:\n              Estimate Std. Error t value Pr(>|t|)\n(Intercept) -208.57325  158.42281  -1.317    0.195\nYear           0.11513    0.08025   1.435    0.158\n\nResidual standard error: 7.463 on 45 degrees of freedom\nMultiple R-squared:  0.04373,\tAdjusted R-squared:  0.02248 \nF-statistic: 2.058 on 1 and 45 DF,  p-value: 0.1583\n```\n\n\n:::\n:::\n\n\nThe slope is indeed positive, but it is not significantly different\nfrom zero. Also, the R-squared is *very* small, 4.4%. Thus the apparent upward trend is no more than chance.\n\nExtra: looking at the plot from earlier with the smooth trend suggests that there may not have been any real increase since 1950, but if you look only since about 1985 it may be different. There is a statistical question mark over that, though, because we started looking at 1985 only because there seemed to be an upward trend starting from about there. \n\n\n$\\blacksquare$\n\n\n\n\n\n## Students and exercise\n\n Some students in a Statistics class were asked how many\nminutes they typically exercised in a week. The data are shown in\n[http://ritsokiguess.site/datafiles/exercise.txt](http://ritsokiguess.site/datafiles/exercise.txt). \n\nSome of the\nstudents identified as male and some as female. Our concern is how the males\nand females compare in terms of the amount of exercise they do.\n\n\n(a) Take a look at the data file. (Click on the link, or paste the copied link into your web browser.) How is it laid out?\n\nSolution\n\nAligned in columns. Or, separated by spaces, but a variable number\nof them. (The latter is a hint that \\verb=read_delim= will not\nwork, and the former is a hint about what *will* work.)\n\n$\\blacksquare$\n\n\n(b) Read in and display (some of) the data. (This means to\ndisplay enough of what you read in to convince others that you read\nin the right kind of thing.)\n\nSolution\n\n\"Aligned in columns\" is the best way of saying it so that you\nknow to use \\verb=read_table=. Hence:\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_url <- \"http://ritsokiguess.site/datafiles/exercise.txt\"\nexercise <- read_table(my_url)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\n── Column specification ────────────────────────────────────────────────────────\ncols(\n  gender = col_character(),\n  minutes = col_double()\n)\n```\n\n\n:::\n\n```{.r .cell-code}\nexercise\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"gender\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"minutes\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"female\",\"2\":\"60\"},{\"1\":\"female\",\"2\":\"240\"},{\"1\":\"female\",\"2\":\"0\"},{\"1\":\"female\",\"2\":\"360\"},{\"1\":\"female\",\"2\":\"450\"},{\"1\":\"female\",\"2\":\"200\"},{\"1\":\"female\",\"2\":\"100\"},{\"1\":\"female\",\"2\":\"70\"},{\"1\":\"female\",\"2\":\"240\"},{\"1\":\"female\",\"2\":\"0\"},{\"1\":\"female\",\"2\":\"60\"},{\"1\":\"female\",\"2\":\"360\"},{\"1\":\"female\",\"2\":\"180\"},{\"1\":\"female\",\"2\":\"300\"},{\"1\":\"female\",\"2\":\"0\"},{\"1\":\"female\",\"2\":\"270\"},{\"1\":\"male\",\"2\":\"180\"},{\"1\":\"male\",\"2\":\"300\"},{\"1\":\"male\",\"2\":\"60\"},{\"1\":\"male\",\"2\":\"480\"},{\"1\":\"male\",\"2\":\"0\"},{\"1\":\"male\",\"2\":\"90\"},{\"1\":\"male\",\"2\":\"300\"},{\"1\":\"male\",\"2\":\"14\"},{\"1\":\"male\",\"2\":\"600\"},{\"1\":\"male\",\"2\":\"360\"},{\"1\":\"male\",\"2\":\"120\"},{\"1\":\"male\",\"2\":\"0\"},{\"1\":\"male\",\"2\":\"240\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\nJust entering the data frame name displays the first ten rows, which\nis usually enough to convince anyone that you have the right thing. \n\nCall the data frame what you like, as long as it describes what's in\nthe data frame in some way.\n\n\n$\\blacksquare$\n\n\n(c) Make a suitable plot of this data frame. \n\nSolution\n\nTwo variables, one quantitative and one categorical, means that a\nboxplot is the thing:\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(exercise, aes(x=gender, y=minutes)) + geom_boxplot()\n```\n\n::: {.cell-output-display}\n![](making-graphs_files/figure-html/exercise-2-1.png){width=672}\n:::\n:::\n\n\n$\\blacksquare$\n\n\n(d) Does there appear to be any substantial difference in the\naverage amount of time that males and females spend exercising?\nExplain briefly. (\"average\" could be mean or median. Which is it\nhere?)\n\nSolution\n\nA boxplot shows the median. So we learn here that the median time\nspent exercising per week is very slightly higher for\nfemales. However, there is a lot of variability (the height of the\nboxes), and so the difference between the medians is very\nsmall. Hence, there is definitely *no* substantial difference\nbetween males and females. \n\nLess insightfully, the difference in median between males and females is\nvery small (but that doesn't rule out the possibility that the\nspread is very small also).\n\n$\\blacksquare$\n\n\n(e) How do you know that both distributions, for males as well\nas females, are skewed to the right? Explain (very) briefly.\n\nSolution\n\nThe upper whiskers, at the top of the box, are longer than the\nlower ones (at the bottom).\n\n$\\blacksquare$\n\n\n(f) For data like this, why does it make practical sense that\nthe distributions are skewed to the right?\n\nSolution\n\nNobody can exercise less than 0 minutes per week, but there is no\nupper limit: a student in the class can exercise as much as they\nwant. This means that there could be unusually high values, but\nnot unusually low values. \n\nExtra: Distributions that have a limit on one side are often skewed to the other side. \nThis one has a limit on the left, so it is skewed to the *right*. This is most likely to be true if \nthere are observations close to the limit, such as the people in this data set that don't exercise at all (and there are some of those).\n\n\n\n$\\blacksquare$\n\n\n\n\n\n",
    "supporting": [
      "making-graphs_files/figure-html"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}